<div class='ask-survey'>

	<h2>{{survey.title}}</h2>

	<br/>

	<div ng-show='response.completed'>
		<div ng-show='survey.completionMessage' ng-bind-html='survey.completionMessage | markdown'>
		</div>

		<div ng-hide='survey.completionMessage'>
			Thank you!
		</div>
	</div>

	<div ng-hide='response.completed'>

		<ul class='page-header' ng-show='state.pages.length > 1'>
			<li ng-repeat='page in state.pages' ng-class='{current: page.current}'>
				<span class='fa-stack fa-lg' ng-hide='page.current'>
					<i class='fa fa-circle-thin fa-stack-2x'></i>
					<i class='fa fa-stack-1x'><strong>{{page.pageIndex+1}}</strong></i>
				</span>
				<span class='fa-stack fa-lg' ng-show='page.current'>
					<i class='fa fa-circle fa-stack-2x'></i>
					<i class='fa fa-inverse fa-stack-1x'><strong>{{page.pageIndex+1}}</strong></i>
				</span>

				{{page.title}}
			</li>
		</ul>

		<div ng-repeat='field in state.fields'> 
			<ask-field field='field' answer='response.answers[field.id]' state='state' response='response' ng-if='field.visible'></ask-field>
		</div> 

		<div class='text-center'>

			<hr/>

			<p class='pull-right' ng-show='state.pages.length > 1'>
				<span class='text-muted'>page</span>
				{{response.pageIndex+1}}
				<span class='text-muted'>of</span>
				{{state.pages.length}}
			</p>

			<a class='btn btn-default' ng-click='back()' ng-hide='onFirstPage()'>
				<span class='glyphicon glyphicon-circle-arrow-left' aria-hidden='true'></span>
				&nbsp;
				Go Back
			</a>

			<a class='btn btn-default' ng-click='continue()' ng-show='onLastPage()'>Finish</a>
						
			<a class='btn btn-default' ng-click='continue()' ng-hide='onLastPage()'>
				Continue
				&nbsp;
				<span class='glyphicon glyphicon-circle-arrow-right' aria-hidden='true'></span>
			</a>
		</div>
	</div>
</div>